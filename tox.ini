[tox]
skipsdist = True
envlist =
    {py35,py36}-zoo-{windows,linux}
    flake8
    scripts-linux
    docs-linux

[testenv:docs-linux]
changedir= docs
commands=
    sphinx-build -nW -b html -d {envtmpdir}/doctrees . {envtmpdir}/html

[testenv]
setenv =
    PYTHONPATH = {toxinidir}:{toxinidir}
platform =
    windows: win32
    linux: linux
deps =
    -r{toxinidir}/requirements.txt
    docs: sphinx
    flake8: flake8>=2.0,<3.0
    windows: pypiwin32
    zoo: coverage
commands =
    flake8: flake8
    scripts: {toxinidir}/docs/run_demo_scripts.sh
    zoo-linux: /bin/bash -c 'export LC_ALL=C.UTF-8 && export LANG=C.UTF-8 && coverage run --branch --parallel-mode --source=wcag_zoo wcag_zoo/testrunner.py {toxinidir}/tests/html/*.html'
    zoo-windows: coverage run --branch --parallel-mode --source=wcag_zoo wcag_zoo/testrunner.py ./tests/html/*.html
